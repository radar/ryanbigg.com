<!DOCTYPE HTML>
<html>
  <head>
    <title>Blog of Ryan Bigg - Debugging Rails Controllers</title>
    <link href="http://feeds.feedburner.com/ryanbigg" rel="alternate" title="The Life of a Radar" type="application/atom+xml" />
    <link href='http://fonts.googleapis.com/css?family=Buenard' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' href='/css/style.css' media='screen'>
    <link rel='stylesheet' href='/css/mobile.css'>
  <body>
    <h1 align='center'><a href='http://ryanbigg.com'>The Life of a Radar</a></h1>
    <div id='post'>
      <article>
        <a href="/2013/09/debugging-rails-controllers"><header>Debugging Rails Controllers</header></a>
        <small>05 Sep 2013</small><br>
        <p>Here&#39;s my flow for debugging a misbehaving controller. Imagine that there&#39;s a form at <code>app/views/messages/new.html.erb</code> that is posting to <code>MessagesController#create</code>. The parameters aren&#39;t being passed through from the form to the controller, and the model is raising a validation error saying that a field is blank -- even though it&#39;s <em>clearly</em> not.</p>

<h3>Step 0: Does restarting the server fix the problem?</h3>

<h3>Step 1: Check the form</h3>

<ul>
<li>Is the attribute defined in the correct place? </li>
<li>Is it using the form builder helper (i.e. <code>f.text_field</code>) or is it using <code>text_field_tag</code>? If it&#39;s supposed to be <code>params[:message][:body]</code> then it should be using the form builder. If not, then it should be using <code>text_field_tag</code> or similar.</li>
<li>Unlikely, but still possible: Is the field disabled before submission of the form? Disabled fields are not passed through as parameters.</li>
</ul>

<h3>Step 2: Check the controller</h3>

<ul>
<li>Is the route to the controller defined correctly in <code>config/routes.rb</code>?</li>
<li>Is the controller set up to receive the right parameters?</li>
<li>Did I spell &#39;message&#39; with the correct number of &#39;s&#39;s within <code>params[:message]</code>?</li>
<li>Are the parameters from the form permitted using strong_parameters?</li>
<li>Are <em>all</em> the parameters from the form permitted?</li>
<li>Did I spell the parameters correctly? </li>
<li>What does the log output say for this controller? Does it contain the parameters I want with the values I want?</li>
<li>Can I place a <code>binding.pry</code> statement at the top of the action and print out <code>params</code> to see the correct parameters there too?</li>
</ul>

<h3>Step 3: Check the model</h3>

<ul>
<li>If using <code>attr_accessible</code>, are the attribute marked as accessible?</li>
<li>Did I accidentally use <code>attr_accessor</code> when I meant to use <code>attr_accessible</code>?</li>
<li>Did I define a setter method for this attribute accidentally that doesn&#39;t actually set the attribute?</li>
<li>Is there a callback that unsets this parameter somehow?</li>
<li>If it&#39;s nested attributes that are being sent through, go check the nested model for the above.</li>
</ul>

      </article>
    </div>
    <div id='disqus_thread'></div>
    <script type="text/javascript">
        var disqus_shortname = 'ryanbigg'; // required: replace example with your forum shortname

        var disqus_identifier = 'RB-344 http://ryanbigg.com/?p=RB-344'
        var disqus_url = 'http://ryanbigg.com/2013/09/debugging-rails-controllers';
    </script>
    <script src='http://ryanbigg.disqus.com/embed.js'></script>
    
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    <script type="text/javascript">
      var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.type  = 'text/javascript';
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4e30f771f5a1f547c8000001');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();
    </script>   
  </body>
</html>
